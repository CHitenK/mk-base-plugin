import{defineComponent as e,provide as t,reactive as a,onMounted as l,toRefs as r,nextTick as o,pushScopeId as n,popScopeId as d,resolveComponent as i,resolveDirective as s,openBlock as u,createBlock as c,createVNode as p,createCommentVNode as m,withDirectives as f,createTextVNode as h,toDisplayString as g,withScopeId as y,ref as b,inject as v,watch as V,computed as _,Fragment as x,renderList as w,withModifiers as I,vShow as F}from"vue";import C from"axios";import{ElMessage as k,ElMessageBox as N}from"element-plus";import U from"dayjs";const P=C.create({baseURL:sessionStorage.getItem("http-url")||"",timeout:2e4});function S(e,t){return P({url:"/auth/v1/menus",method:"post",headers:t,data:e})}function D(e,t){return P({url:`/auth/v1/menus/${e}`,headers:t,method:"delete"})}function L(e,t){return P({url:`/auth/v1/menus/${e.id}`,method:"put",headers:t,data:e})}function T(e,t){return P({url:"/auth/v1/resources",method:"get",params:e,headers:t})}P.interceptors.request.use((e=>e),(e=>{console.log(e),Promise.reject(e)})),P.interceptors.response.use((e=>0===e.data.status?e.data:(k.error(e.data.statusText),Promise.reject())),(e=>{if(e.response&&e.response.data){const t=e.response.status,a=e.response.data.message;k.error(`Code: ${t}, Message: ${a}`)}else k.error(`${e}`);return Promise.reject(e)}));var B=Object.assign,z=e({props:{httpBaseUrl:{type:String,default:""},headers:{type:Object,default:()=>{}}},setup(e){sessionStorage.setItem("http-url",e.httpBaseUrl),t("headers",e.headers);const n=a({tableData:[],height:200,total:0,pageSize:100,pageNo:1,searchTxt:"",loading:!1,editVisible:!1,editType:"add",editParms:{},tableId:"table"+Date.now()}),d=()=>{return t=this,a=arguments,l=function*(t=1){n.loading=!0;try{const t=yield T({size:n.pageSize,pageNo:n.pageNo,searchTxt:n.searchTxt},e.headers);n.tableData=t.data.data,n.pageNo=t.data.pageNo,n.total=t.data.totalCount}catch(e){console.log(e)}n.loading=!1},new Promise(((e,r)=>{var o=e=>{try{d(l.next(e))}catch(e){r(e)}},n=e=>{try{d(l.throw(e))}catch(e){r(e)}},d=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,n);d((l=l.apply(t,a)).next())}));var t,a,l};return l((()=>{o((()=>{const e=document.getElementById(n.tableId),t=document.documentElement.clientHeight,a=e.getBoundingClientRect();n.height=t-a.top-90})),d()})),B(B({currentChange:e=>{n.pageNo=e,d()}},r(n)),{getTableList:d,dayjs:U})}});const j=y("data-v-9982f184");n("data-v-9982f184");const E=p("p",{class:"title"},"接口管理",-1),O={class:"serach-bx"},$=h("搜索"),M={class:"pagination-bx"},R={class:"pagination-left"},A=h(" 总数："),q={style:{color:"#e53125"}},H=h("，当前页码： ");d();const Y=j((function(e,t,a,l,r,o){const n=i("el-input"),d=i("el-button"),y=i("el-table-column"),b=i("el-table"),v=i("el-pagination"),V=s("loading");return u(),c("div",null,[E,p("div",O,[p("div",null,[p(n,{placeholder:"请输入内容",style:{width:"330px","margin-right":"20px"},modelValue:e.searchTxt,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchTxt=t),clearable:""},null,8,["modelValue"]),p(d,{type:"primary",icon:"el-icon-search",onClick:t[2]||(t[2]=t=>(e.pageNo=1,e.getTableList()))},{default:j((()=>[$])),_:1})]),m(' <div>\r\n        <el-button type="success" @click="openEdit({})">+ 新增接口</el-button>\r\n      </div> ')]),f(p(b,{id:e.tableId,data:e.tableData,border:"",style:{width:"100%"},height:e.height},{default:j((()=>[p(y,{label:"序号",width:"50",type:"index"}),p(y,{prop:"name",label:"接口名称"}),p(y,{prop:"systemName",label:"业务系统"}),p(y,{prop:"description",label:"接口描述"}),p(y,{prop:"url",label:"接口地址"}),p(y,{prop:"method",label:"请求方式",width:"80"}),p(y,{prop:"name",label:"最后编辑时间"},{default:j((({row:t})=>[h(g(e.dayjs(t.modifiedAt).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1})])),_:1},8,["id","data","height"]),[[V,e.loading]]),p("div",M,[p("div",R,[A,p("span",q,g(e.total),1),H,p("span",null,g(e.pageNo),1)]),p(v,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"onCurrent-change":e.currentChange},null,8,["total","page-size","onCurrent-change"])])])}));z.render=Y,z.__scopeId="data-v-9982f184",z.__file="src/lib/OperationConfig/InterFaceList.vue";var K=Object.assign,G=e({props:{type:{type:String,default:""},platform:{type:String,default:""},targetData:{type:Object,default:()=>{}},menuList:{type:Array,default:()=>[]}},setup(e,{emit:t}){const l=b(),r=v("headers");let o=a({id:"",name:"",redirectUrl:"",url:"",type:"menu",sortNum:1,iconUrl:"",parentId:0,platform:e.platform,description:"",parentName:"",status:!1});const n=a({value:"id",label:"name",checkStrictly:!0}),d=a({name:{required:!0,message:"请输入页面名称",trigger:"blur"},url:{required:!0,message:"请输入路由地址",trigger:"blur"},sortNum:{required:!0,message:"请输入排序",trigger:"blur"}});V((()=>e.targetData),((t={})=>{if(t)if("add"===e.type){const{parentId:e,parentName:a}=t;o.parentId=e||0,o.parentName=e?a:"根节点（顶级菜单）",o.name="",o.url="",o.redirectUrl="",o.iconUrl="",o.description="",o.type="menu",o.sortNum=1}else{const{name:e="",url:a="",type:l="menu",parentId:r,iconUrl:n="",id:d,sortNum:i,status:s,redirectUrl:u,parentName:c,description:p=""}=t;o.parentId=r,o.parentName=r?"":"根节点（顶级菜单）",o.name=e,o.url=a,o.description=p,o.redirectUrl=u,o.iconUrl=n,o.type=l,o.sortNum=i,o.id=d,o.status=1===s}}),{deep:!0,immediate:!0});const i=()=>{return a=this,l=null,n=function*(){try{o.platform=e.platform,"add"===e.type?(o.status=0,yield S(o,r),k.success("操作成功"),t("saveSuccess")):(o.parentId=Array.isArray(o.parentId)?o.parentId[o.parentId.length-1]:o.parentId,yield L(K(K({},o),{status:o.status?1:0}),r),k.success("操作成功"),t("saveSuccess"))}catch(e){console.log(e)}},new Promise(((e,t)=>{var r=e=>{try{d(n.next(e))}catch(e){t(e)}},o=e=>{try{d(n.throw(e))}catch(e){t(e)}},d=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);d((n=n.apply(a,l)).next())}));var a,l,n};return{editForm:o,rules:d,confirm:()=>{l.value.validate().then((e=>{if(!e)return!1;N.confirm("确认保存此次操作数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{i()}))}))},seveform:l,defaultProps:n}}});const J=y("data-v-3ae3769c");n("data-v-3ae3769c");const Q=p("span",{class:"tip"},"不多于8个汉字",-1),W=p("span",{class:"tip"},"路由为空，则不跳转",-1),X={key:0},Z=h("菜单项"),ee=h("页面资源"),te=p("span",{class:"tip"},"启用后将在前端显示，否则隐藏",-1);d();const ae=J((function(e,t,a,l,r,o){const n=i("el-input"),d=i("el-form-item"),s=i("el-cascader"),f=i("el-radio"),y=i("el-radio-group"),b=i("el-switch"),v=i("el-input-number"),V=i("el-button"),_=i("el-form");return u(),c(_,{ref:"seveform",rules:e.rules,model:e.editForm,"label-width":"140px"},{default:J((()=>[p(d,{class:"form-item",label:"页面名称：",prop:"name"},{default:J((()=>[p(n,{modelValue:e.editForm.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.editForm.name=t),style:{width:"50%"},clearable:"",placeholder:"请输入",maxlength:"8"},null,8,["modelValue"]),Q])),_:1}),p(d,{class:"form-item",label:"描述："},{default:J((()=>[p(n,{modelValue:e.editForm.description,"onUpdate:modelValue":t[2]||(t[2]=t=>e.editForm.description=t),style:{width:"50%"},clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(d,{class:"form-item",label:"路由地址：",prop:"url"},{default:J((()=>[p(n,{modelValue:e.editForm.url,"onUpdate:modelValue":t[3]||(t[3]=t=>e.editForm.url=t),style:{width:"50%"},clearable:"",placeholder:"/xxxxx"},null,8,["modelValue"]),W])),_:1}),p(d,{class:"form-item",label:"重定向："},{default:J((()=>[p(n,{modelValue:e.editForm.redirectUrl,"onUpdate:modelValue":t[4]||(t[4]=t=>e.editForm.redirectUrl=t),style:{width:"50%"},clearable:"",placeholder:"/xxxxx"},null,8,["modelValue"])])),_:1}),p(d,{class:"form-item",label:"上级菜单："},{default:J((()=>[e.editForm.parentName?(u(),c("span",X,g(e.editForm.parentName),1)):"edit"===e.type?(u(),c(s,{key:1,options:e.menuList,props:e.defaultProps,modelValue:e.editForm.parentId,"onUpdate:modelValue":t[5]||(t[5]=t=>e.editForm.parentId=t),placeholder:"请选择",style:{width:"50%"}},null,8,["options","props","modelValue"])):m("v-if",!0)])),_:1}),p(d,{class:"form-item",label:"页面类型："},{default:J((()=>[p(y,{modelValue:e.editForm.type,"onUpdate:modelValue":t[6]||(t[6]=t=>e.editForm.type=t)},{default:J((()=>[p(f,{label:"menu"},{default:J((()=>[Z])),_:1}),p(f,{label:"page"},{default:J((()=>[ee])),_:1})])),_:1},8,["modelValue"])])),_:1}),p(d,{class:"form-item",label:"icon图标："},{default:J((()=>[p(n,{modelValue:e.editForm.iconUrl,"onUpdate:modelValue":t[7]||(t[7]=t=>e.editForm.iconUrl=t),style:{width:"50%"},clearable:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1}),"edit"===e.type?(u(),c(d,{key:0,class:"form-item",label:"启动状态："},{default:J((()=>[p(b,{modelValue:e.editForm.status,"onUpdate:modelValue":t[8]||(t[8]=t=>e.editForm.status=t)},null,8,["modelValue"]),te])),_:1})):m("v-if",!0),p(d,{class:"form-item",label:"排序：",prop:"sortNum"},{default:J((()=>[p(v,{modelValue:e.editForm.sortNum,"onUpdate:modelValue":t[9]||(t[9]=t=>e.editForm.sortNum=t),style:{width:"200px"},min:1,max:100},null,8,["modelValue"])])),_:1}),p(d,null,{default:J((()=>[p(V,{type:"primary",onClick:e.confirm},{default:J((()=>[h("确认"+g("add"===e.type?"新增":"修改"),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["rules","model"])}));G.render=ae,G.__scopeId="data-v-3ae3769c",G.__file="src/lib/OperationConfig/EditMenu.vue";var le=e({props:{type:{type:String,default:""},platform:{type:String,default:""},targetData:{type:Object,default:()=>{}},menuList:{type:Array,default:()=>[]}},setup(e,{emit:t}){const r=b(),o=v("headers"),n=a({id:e.targetData.id||"",name:e.targetData.name||"",code:e.targetData.code||"",description:e.targetData.description||"",sortNum:e.targetData.sortNum||1,status:1===e.targetData.status,type:"operation",parentId:e.targetData.parentId,platform:e.platform}),d=a({name:{required:!0,message:"请输入功能名称",trigger:"blur"},code:{required:!0,message:"请输入功能编码",trigger:"blur"},sortNum:{required:!0,message:"请输入排序",trigger:"blur"}}),i=()=>{return a=this,l=null,r=function*(){try{n.status=n.status?1:0,"add"===e.type?(yield S(n,o),k.success("操作成功"),t("saveSuccess")):(yield L(n,o),k.success("操作成功"),t("saveSuccess"))}catch(e){console.log(e)}},new Promise(((e,t)=>{var o=e=>{try{d(r.next(e))}catch(e){t(e)}},n=e=>{try{d(r.throw(e))}catch(e){t(e)}},d=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,n);d((r=r.apply(a,l)).next())}));var a,l,r};return l((()=>{})),{editForm:n,rules:d,confirm:()=>{r.value.validate().then((e=>{if(!e)return!1;N.confirm("确认提交此次操作数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{i()}))}))},seveform:r}}});const re=y("data-v-e36892a4");n("data-v-e36892a4");const oe={class:"dialog-bx"},ne=p("span",{class:"tip"},"同一页面资源功能名称不能重名",-1),de=p("span",{class:"tip"},"功能编码不能重复",-1),ie=p("span",{class:"tip"},"启用后将在前端显示，否则隐藏",-1);d();const se=re((function(e,t,a,l,r,o){const n=i("el-input"),d=i("el-form-item"),s=i("el-switch"),m=i("el-input-number"),f=i("el-button"),y=i("el-form");return u(),c("div",oe,[p(y,{ref:"seveform",rules:e.rules,model:e.editForm,"label-width":"140px"},{default:re((()=>[p(d,{class:"form-item",label:"功能名称：",prop:"name"},{default:re((()=>[p(n,{modelValue:e.editForm.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.editForm.name=t),style:{width:"50%"},clearable:""},null,8,["modelValue"]),ne])),_:1}),p(d,{class:"form-item",label:"功能编码：",prop:"code"},{default:re((()=>[p(n,{modelValue:e.editForm.code,"onUpdate:modelValue":t[2]||(t[2]=t=>e.editForm.code=t),style:{width:"50%"},clearable:""},null,8,["modelValue"]),de])),_:1}),p(d,{class:"form-item",label:"功能说明："},{default:re((()=>[p(n,{modelValue:e.editForm.description,"onUpdate:modelValue":t[3]||(t[3]=t=>e.editForm.description=t),style:{width:"50%"},clearable:""},null,8,["modelValue"])])),_:1}),p(d,{class:"form-item",label:"启用状态："},{default:re((()=>[p(s,{modelValue:e.editForm.status,"onUpdate:modelValue":t[4]||(t[4]=t=>e.editForm.status=t)},null,8,["modelValue"]),ie])),_:1}),p(d,{class:"form-item",label:"排序：",prop:"sortNum"},{default:re((()=>[p(m,{modelValue:e.editForm.sortNum,"onUpdate:modelValue":t[5]||(t[5]=t=>e.editForm.sortNum=t),style:{width:"30%"},clearable:""},null,8,["modelValue"])])),_:1}),p(d,null,{default:re((()=>[p(f,{type:"primary",onClick:e.confirm},{default:re((()=>[h(g("add"===e.type?"新增资源":"编辑资源"),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["rules","model"])])}));le.render=se,le.__scopeId="data-v-e36892a4",le.__file="src/lib/OperationConfig/EditSource.vue";var ue=Object.assign,ce=(e,t,a)=>new Promise(((l,r)=>{var o=e=>{try{d(a.next(e))}catch(e){r(e)}},n=e=>{try{d(a.throw(e))}catch(e){r(e)}},d=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,n);d((a=a.apply(e,t)).next())})),pe=e({props:{id:{type:String,default:""}},setup(e){const t=v("headers"),o=a({unInterfaceList:[],interfaceList:[],form:{page:1,size:1e3}});let n=[];const d=()=>ce(this,null,(function*(){try{const a=yield function(e,t){return P({url:`/auth/v1/menus/${e}/resources`,headers:t,method:"get"})}(e.id,t);if(o.unInterfaceList=a.data.map((e=>e.id)),n.length<1){const e=yield T({page:1,size:1e4},t);n=e.data.data}const l=o.unInterfaceList.map((e=>e.id)),r=[];n.forEach((e=>{l.includes(e.id)||(e.key=e.id||-1,e.label=e.name+":"+e.url,r.push(e))})),o.interfaceList=r}catch(e){console.log(12,e)}}));return V((()=>e.id),(e=>{e&&d()})),l((()=>{e.id&&d()})),ue(ue({},r(o)),{handleBing:()=>ce(this,null,(function*(){try{yield function(e,t,a){return P({url:`/auth/v1/menus/${e}/bindResources`,method:"post",headers:a,data:t})}(e.id,o.unInterfaceList,t),k.success("操作成功"),d()}catch(e){console.log(e)}}))})}});const me=y("data-v-611538a3");n("data-v-611538a3");const fe={class:"addInterface"},he={style:{height:"86%"}},ge={class:"center",style:{"padding-top":"20px"}},ye=h("提交绑定");d();const be=me((function(e,t,a,l,r,o){const n=i("el-transfer"),d=i("el-button");return u(),c("div",fe,[p("div",he,[p(n,{modelValue:e.unInterfaceList,"onUpdate:modelValue":t[1]||(t[1]=t=>e.unInterfaceList=t),filterable:"",titles:["接口列表","已选接口"],data:e.interfaceList},null,8,["modelValue","data"])]),p("div",ge,[p(d,{type:"primary",style:{width:"200px"},onClick:e.handleBing},{default:me((()=>[ye])),_:1},8,["onClick"])])])}));pe.render=be,pe.__scopeId="data-v-611538a3",pe.__file="src/lib/OperationConfig/BindInterface.vue";var ve=Object.assign,Ve=(e,t,a)=>new Promise(((l,r)=>{var o=e=>{try{d(a.next(e))}catch(e){r(e)}},n=e=>{try{d(a.throw(e))}catch(e){r(e)}},d=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,n);d((a=a.apply(e,t)).next())})),_e=e({name:"ResourceAllocation",props:{httpBaseUrl:{type:String,default:""},headers:{type:Object,default:()=>{}}},components:{EditMenu:G,EditSource:le,BindInterface:pe},setup(e){sessionStorage.setItem("http-url",e.httpBaseUrl),t("headers",e.headers);const o=b(),n=a({sourceList:[],dialogVisible:!1,effectVisible:!1,interFaceVisible:!1,platform:"",defaultProps:{children:"children",label:"name"},loading:!1,tableLoading:!1,addParms:{},editParms:{},editSourceParms:{},defaultChecked:[],editSourceType:"edit",treeData:[],tableData:[],interFaceId:"",interTitle:""}),d=_((()=>Object.keys(n.editParms).length>0)),i=()=>Ve(this,null,(function*(){n.loading=!0;try{const l=yield(t={containOperation:!1,platform:n.platform},a=e.headers,P({url:"/auth/v1/menus",method:"get",headers:a,params:t}));n.treeData=l.data||[]}catch(e){console.log(e)}var t,a;n.loading=!1})),s=()=>Ve(this,null,(function*(){const t=yield(a=e.headers,P({url:"/auth/v1/dicts/platforms",method:"get",headers:a}));var a;n.sourceList=t.data||[],n.platform=n.sourceList[0]?n.sourceList[0].code:"",i()})),u=()=>Ve(this,null,(function*(){n.tableLoading=!0;try{const l=yield(t=n.editParms.id,a=e.headers,P({url:`/auth/v1/menus/${t}/operations`,headers:a,method:"get"}));n.tableData=l.data||[]}catch(e){console.log(e)}var t,a;n.tableLoading=!1})),c=(e,t)=>{if(0===t)return e.map((e=>e.id));for(let a=0;a<e.length;a++){let l=e[a];if(l.id===t){if(l.children)return l.children.map((e=>e.id))}else l.children&&c(l.children,t)}},p=t=>Ve(this,null,(function*(){for(let a=0;a<t.length;a++){const l=t[a],r={name:`${l.name}-查看`,code:`${l.url.replace("/","")}_view`,description:`${l.name}页面查看权限，禁用则页面无法在系统查看, 勿删！！！`,sortNum:1,status:1,type:"operation",parentId:l.id,platform:n.platform};"page"===l.type&&(yield S(r,e.headers)),l.children&&l.children.length>0&&p(l.children)}}));return l((()=>{s()})),ve(ve({},r(n)),{openEffect:e=>{n.editSourceType=e.id?"edit":"add",n.editSourceParms=ve({parentId:n.editParms.id},e),n.effectVisible=!0},openEdit:e=>{n.dialogVisible=!0,n.addParms={parentId:e.id,parentName:e.name}},getMenuList:i,handleNodeClick:(e,t)=>{const{parent:a={}}=e,{name:l}=a.data;n.editParms=ve(ve({},t),{parentName:l}),o.value.setCheckedKeys([t.id]),u()},deleMenu:t=>{N.confirm(`你是否删除 [ ${t.name} ] 菜单及菜单下的相关资源？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>Ve(this,null,(function*(){yield D(t.id,e.headers),k.success("删除成功"),t.id===n.editParms.id&&(n.editParms={}),i()}))))},nodeDrop:(t,a,l)=>Ve(this,null,(function*(){const r=t.data.id,o="inner"===l?a.data.id:a.data.parentId,d=c(n.treeData,o);var s,u;yield(s={id:r,parentId:o,sortedMenuIds:d},u=e.headers,P({url:`/auth/v1/menus/${s.id}/update-parent`,method:"PATCH",headers:u,data:s})),i()})),treeRef:o,showCar:d,getTableList:u,deteRow:t=>Ve(this,null,(function*(){N.confirm(`你是否删除 [ ${t.name} ] 资源？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>Ve(this,null,(function*(){yield D(t.id,e.headers),k.success("删除成功"),u()}))))})),openInterFace:e=>Ve(this,null,(function*(){n.interFaceId=e.id.toString(),n.interTitle=e.name,n.interFaceVisible=!0})),createCheckView:p})}});const xe=y("data-v-65c1edf7");n("data-v-65c1edf7");const we={class:"menu-set-bx"},Ie=p("p",null,"菜单及页面资源配置",-1),Fe={class:"menu-set-content"},Ce={class:"content-left"},ke={class:"back-stage"},Ne=p("span",null,"后台管理",-1),Ue=p("span",{class:"text-midlle"},"(拖拽完成菜单位置调整)",-1),Pe=p("span",{class:"btn-add"},"+",-1),Se={class:"tree-bx zg-scroll"},De=p("span",{class:"btn-add"},"+",-1),Le=p("span",{class:"btn-add btn-jian"},"-",-1),Te={class:"content-right"},Be={class:"tab-content zg-scroll"},ze={class:"tab-content zg-scroll tab-content-ot"},je={class:"table-title"},Ee=h("新增功能"),Oe=h("编辑"),$e=p("span",{style:{color:"red"}},"删除",-1),Me=p("span",{style:{color:"#666"}},"绑定接口",-1),Re={key:1,class:"no-data-bx"},Ae=h("请点击要编辑的菜单"),qe=h("执行"),He={class:"dialog-bx"};d();const Ye=xe((function(e,t,a,l,r,o){const n=i("el-option"),d=i("el-select"),y=i("el-button"),b=i("el-tree"),v=i("EditMenu"),V=i("el-tab-pane"),_=i("el-table-column"),C=i("el-table"),k=i("el-tabs"),N=i("spam"),U=i("el-dialog"),P=i("EditSource"),S=i("BindInterface"),D=s("loading");return u(),c("div",we,[Ie,p("div",Fe,[p("div",Ce,[p(d,{modelValue:e.platform,"onUpdate:modelValue":t[1]||(t[1]=t=>e.platform=t),placeholder:"请选择",style:{width:"100%"}},{default:xe((()=>[(u(!0),c(x,null,w(e.sourceList,(e=>(u(),c(n,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),p("div",ke,[Ne,Ue,p(y,{type:"primary",size:"mini",onClick:t[2]||(t[2]=t=>e.openEdit({}))},{default:xe((()=>[Pe])),_:1})]),p("div",Se,[f(p(b,{data:e.treeData,"node-key":"id","default-expand-all":"",draggable:"",ref:"treeRef",props:e.defaultProps,"onNode-drop":e.nodeDrop},{default:xe((({node:t,data:a})=>[p("div",{class:"node-item",onClick:l=>e.handleNodeClick(t,a)},[p("span",{class:{act:e.editParms.id===a.id}},g("menu"===a.type?"[菜单]":"[页面]")+g(a.name),3),p("div",null,[p(y,{type:"primary",size:"mini",onClick:I((t=>e.openEdit(a)),["stop"])},{default:xe((()=>[De])),_:1},8,["onClick"]),p(y,{onClick:I((t=>e.deleMenu(a)),["stop"]),size:"mini"},{default:xe((()=>[Le])),_:1},8,["onClick"])])],8,["onClick"])])),_:1},8,["data","props","onNode-drop"]),[[D,e.loading]])])]),p("div",Te,[e.showCar?(u(),c(k,{key:0,type:"border-card"},{default:xe((()=>[p(V,{label:"菜单/页面"},{default:xe((()=>[p("div",Be,[p(v,{platform:e.platform,type:"edit",targetData:e.editParms,menuList:e.treeData,onSaveSuccess:t[3]||(t[3]=t=>e.getMenuList())},null,8,["platform","targetData","menuList"])])])),_:1}),p(V,{label:"功能"},{default:xe((()=>[p("div",ze,[p("div",je,[p("span",null,"当前页面："+g(e.editParms.name),1),p(y,{type:"primary",onClick:t[4]||(t[4]=t=>e.openEffect({}))},{default:xe((()=>[Ee])),_:1})]),f(p(C,{data:e.tableData,border:"",style:{width:"100%"}},{default:xe((()=>[p(_,{prop:"date",label:"序号",width:"50",type:"index"}),p(_,{prop:"name",label:"功能名称"}),p(_,{prop:"code",label:"功能编码"}),p(_,{prop:"description",label:"说明"}),p(_,{prop:"name",label:"启动状态",width:"100"},{default:xe((({row:e})=>[h(g(1===e.status?"启用":"禁用"),1)])),_:1}),p(_,{prop:"address",label:"操作",width:"180"},{default:xe((({row:t})=>[p(y,{type:"text",size:"mini",onClick:a=>e.openEffect(t)},{default:xe((()=>[Oe])),_:1},8,["onClick"]),p(y,{type:"text",size:"mini",onClick:a=>e.deteRow(t)},{default:xe((()=>[$e])),_:1},8,["onClick"]),p(y,{type:"text",size:"mini",onClick:a=>e.openInterFace(t)},{default:xe((()=>[Me])),_:1},8,["onClick"])])),_:1})])),_:1},8,["data"]),[[D,e.tableLoading]])])])),_:1})])),_:1})):(u(),c("div",Re,[Ae,f(p(N,{onClick:t[5]||(t[5]=t=>e.createCheckView(e.treeData))},{default:xe((()=>[qe])),_:1},512),[[F,!1]])]))])]),m(" 编辑菜单 "),p(U,{title:"新增菜单",modelValue:e.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=t=>e.dialogVisible=t),width:"60%"},{default:xe((()=>[p("div",He,[p(v,{type:"add",platform:e.platform,targetData:e.addParms,onSaveSuccess:t[6]||(t[6]=t=>(e.dialogVisible=!1,e.getMenuList()))},null,8,["platform","targetData"])])])),_:1},8,["modelValue"]),m(" 编辑菜单 end"),m(" 编辑新功能 "),p(U,{title:"edit"===e.editSourceType?"编辑资源":"新增资源",modelValue:e.effectVisible,"onUpdate:modelValue":t[9]||(t[9]=t=>e.effectVisible=t),width:"60%"},{default:xe((()=>[e.effectVisible?(u(),c(P,{key:0,platform:e.platform,type:e.editSourceType,targetData:e.editSourceParms,onSaveSuccess:t[8]||(t[8]=t=>(e.effectVisible=!1,e.getTableList()))},null,8,["platform","type","targetData"])):m("v-if",!0)])),_:1},8,["title","modelValue"]),m(" 编辑新功能 end"),m(" 接口绑定 "),p(U,{title:e.interTitle,modelValue:e.interFaceVisible,"onUpdate:modelValue":t[10]||(t[10]=t=>e.interFaceVisible=t),width:"70%"},{default:xe((()=>[p(S,{id:e.interFaceId},null,8,["id"])])),_:1},8,["title","modelValue"]),m(" 接口绑定 end ")])}));_e.render=Ye,_e.__scopeId="data-v-65c1edf7",_e.__file="src/lib/OperationConfig/ResourceAllocation.vue";export{z as InterFaceList,_e as ResourceAllocation};
